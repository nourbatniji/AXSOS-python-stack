<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Bootstrap 5 Validation Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="p-4">

    <form action="/reg_user" method="post" class="needs-validation" novalidate>
        {% csrf_token %}
        <h2>Register</h2>
        <!-- First Name -->
        <div class="mb-3">
            <label for="reg_first_name" class="form-label">First name</label>
            <input type="text" class="form-control" id="reg_first_name" name="first_name" required>
            <div class="invalid-feedback">First name is required.</div>
            {% if errors.firstname_valid %}
            <p class="text-danger">{{ errors.firstname_valid }}</p>
            {% endif %}
        </div>

        <!-- Last Name -->
        <div class="mb-3">
            <label for="reg_last_name" class="form-label">Last name</label>
            <input type="text" class="form-control" id="reg_last_name" name="last_name" required>
            <div class="invalid-feedback">Last name is required.</div>
            {% if errors.lastname_valid %}
            <p class="text-danger">{{ errors.lastname_valid }}</p>
            {% endif %}
        </div>

        <!-- Email -->
        <div class="mb-3">
            <label for="reg_email" class="form-label">Email</label>
            <input type="email" class="form-control" id="reg_email" name="email" required>
            <div class="invalid-feedback">Enter a valid email.</div>
            {% if errors.email_valid %}
            <p class="text-danger">{{ errors.email_valid }}</p>
            {% endif %}
        </div>

        <!-- Password -->
        <div class="mb-3">
            <label for="reg_pass" class="form-label">Password</label>
            <input type="password" class="form-control" id="reg_pass" name="password" required>
            <div class="invalid-feedback">Enter a valid pass.</div>
            {% if errors.password_valid %}
            <p class="text-danger">{{ errors.password_valid }}</p>
            {% endif %}
        </div>

        <!-- Password Confirm -->
        <div class="mb-3">
            <label for="reg_confirm" class="form-label">Confirm Password</label>
            <input type="password" class="form-control" id="reg_confirm" name="confirm_pw" required>
            <div class="invalid-feedback">Enter a valid pass.</div>
            {% if errors.firstname_valid %}
            <p class="text-danger">{{ errors.firstname_valid }}</p>
            {% endif %}
        </div>
        {% if errors.not_unique %}
        <p class="text-danger">{{ errors.not_unique }}</p>
        {% endif %}

        <button class="btn btn-primary" type="submit">Register</button>
    </form>


    <form action="/login_user" method="post" class="needs-validation" novalidate>
        {% csrf_token %}
        <h2>Log In</h2>
        <!-- Email -->
        <div class="mb-3">
            <label for="login_email" class="form-label">Email</label>
            <input type="email" class="form-control" id="login_email" name="email" required>
            <div class="invalid-feedback">Enter a valid email.</div>
            {% if login_errors.email_valid %}
            <p class="text-danger">{{ login_errors.email_valid }}</p>
            {% endif %}
        </div>

        <!-- Password -->
        <div class="mb-3">
            <label for="login_pass" class="form-label">Password</label>
            <input type="password" class="form-control" id="login_pass" name="password" required>
            <div class="invalid-feedback">Enter a valid pass.</div>
            {% if login_errors.password_valid %}
            <p class="text-danger">{{ login_errors.password_valid }}</p>
            {% endif %}
        </div>
        <button class="btn btn-primary" type="submit">Login</button>

        {% if login_errors.not_unique %}
        <p class="text-danger">{{ login_errors.not_unique }}</p>
        {% endif %}
        {% if login_errors.pass_not_correct %}
        <p class="text-danger">{{ login_errors.pass_not_correct }}</p>
        {% endif %}


    </form>

    <script>
        (() => {
            'use strict';
            // Run after DOM is ready
            window.addEventListener('DOMContentLoaded', () => {
                const forms = document.querySelectorAll('.needs-validation');
                Array.from(forms).forEach(form => {
                    form.addEventListener('submit', (e) => {
                        if (!form.checkValidity()) {
                            e.preventDefault();
                            e.stopPropagation();
                        }
                        form.classList.add('was-validated'); // <-- triggers Bootstrap styles
                    }, false);
                });
            });
        })();
    </script>
</body>

</html>